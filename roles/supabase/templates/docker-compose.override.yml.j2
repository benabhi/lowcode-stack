# ==============================================================================
# Supabase Docker Compose Override
# Generated by Ansible - DO NOT EDIT MANUALLY
# ==============================================================================
# This override configures ports, networking, and disables optional services.
# Analytics dependencies are removed from docker-compose.yml directly.
# ==============================================================================

# External network for inter-service communication
networks:
  {{ supabase_docker_network }}:
    external: true

services:
  studio:
    ports:
      - "{{ supabase_studio_port }}:3000"
    networks:
      - default
      - {{ supabase_docker_network }}
{% if not supabase_enable_studio %}
    profiles:
      - disabled
{% endif %}

  kong:
    ports:
      - "{{ supabase_api_port }}:8000"
      - "8443:8443"
    networks:
      - default
      - {{ supabase_docker_network }}

  db:
    networks:
      - default
      - {{ supabase_docker_network }}

{% if not supabase_enable_inbucket %}
  inbucket:
    profiles:
      - disabled
{% endif %}

  # Disable analytics stack (optional for self-hosting)
  vector:
    profiles:
      - disabled

  analytics:
    profiles:
      - disabled
